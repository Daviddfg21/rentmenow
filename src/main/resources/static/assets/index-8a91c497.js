import{r as e,a as s,R as a}from"./vendor-3192ac2a.js";import{m as t,B as r,U as i,C as l,A as n,K as c,P as o,S as d,L as m,X as x,M as h,H as p,a as u,b as y,c as g,d as j,e as b,f,g as N,h as v,E as w,i as S,j as C,k,V as E,l as P,n as I,o as D,p as A,q,r as R,F as O,G as T,s as F,t as M,u as L,v as U,w as z,T as $,x as H,I as B,y as V,z as G,D as J,J as _,N as W,O as Z,Q,R as Y,W as K}from"./ui-875cd624.js";import{a as X}from"./utils-25a235f9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var ee={exports:{}},se={},ae=e,te=Symbol.for("react.element"),re=Symbol.for("react.fragment"),ie=Object.prototype.hasOwnProperty,le=ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ne={key:!0,ref:!0,__self:!0,__source:!0};function ce(e,s,a){var t,r={},i=null,l=null;for(t in void 0!==a&&(i=""+a),void 0!==s.key&&(i=""+s.key),void 0!==s.ref&&(l=s.ref),s)ie.call(s,t)&&!ne.hasOwnProperty(t)&&(r[t]=s[t]);if(e&&e.defaultProps)for(t in s=e.defaultProps)void 0===r[t]&&(r[t]=s[t]);return{$$typeof:te,type:e,key:i,ref:l,props:r,_owner:le.current}}se.Fragment=re,se.jsx=ce,se.jsxs=ce,ee.exports=se;var oe=ee.exports,de={},me=s;de.createRoot=me.createRoot,de.hydrateRoot=me.hydrateRoot;const xe=()=>{const[s,a]=e.useState(null),[u,y]=e.useState(!1),[g,j]=e.useState(!1),[b,f]=e.useState(!1),[N,v]=e.useState(!1),w=e.useRef(null);e.useEffect((()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{const e=JSON.parse(s);a(e),y(!0),j("ADMIN"===e.role)}catch(t){localStorage.removeItem("token"),localStorage.removeItem("user")}}),[]),e.useEffect((()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const S=e=>{window.history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate")),f(!1),v(!1)},C=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),y(!1),j(!1),v(!1),f(!1),window.location.href="/"},k=[{name:"Inicio",path:"/",icon:p},{name:"Propiedades",path:"/properties",icon:r},...u?[{name:"Mis Alquileres",path:"/rentals",icon:c},{name:"Crear Propiedad",path:"/create-property",icon:o},...g?[{name:"Admin",path:"/admin",icon:d}]:[]]:[]];return oe.jsxs("nav",{className:"bg-white/90 backdrop-blur-md shadow-lg border-b border-white/20 sticky top-0 z-50",children:[oe.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:oe.jsxs("div",{className:"flex justify-between h-16",children:[oe.jsx(t.div,{className:"flex items-center",whileHover:{scale:1.05},children:oe.jsxs("button",{onClick:()=>S("/"),className:"flex items-center space-x-2",children:[oe.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:oe.jsx(r,{className:"w-5 h-5 text-white"})}),oe.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"RentMeNow"})]})}),oe.jsx("div",{className:"hidden md:flex items-center space-x-8",children:k.map((e=>oe.jsx(t.div,{whileHover:{y:-2},children:oe.jsxs("button",{onClick:()=>S(e.path),className:"flex items-center space-x-1 text-gray-700 hover:text-primary-600 transition-colors duration-300",children:[oe.jsx(e.icon,{className:"w-4 h-4"}),oe.jsx("span",{children:e.name})]})},e.path)))}),oe.jsx("div",{className:"hidden md:flex items-center space-x-4",children:u?oe.jsxs("div",{className:"relative",ref:w,children:[oe.jsxs("button",{onClick:()=>{v(!N)},className:"flex items-center space-x-2 text-gray-700 hover:text-primary-600 transition-colors duration-300 p-2 rounded-lg hover:bg-gray-50",children:[oe.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:oe.jsx(i,{className:"w-4 h-4 text-primary-600"})}),oe.jsx("span",{className:"text-sm font-medium",children:null==s?void 0:s.username}),oe.jsx(l,{className:"w-4 h-4"})]}),oe.jsx(n,{children:N&&oe.jsxs(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2",children:[oe.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:oe.jsx(i,{className:"w-5 h-5 text-primary-600"})}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm font-medium text-gray-800",children:null==s?void 0:s.username}),oe.jsx("p",{className:"text-xs text-gray-500",children:null==s?void 0:s.email}),oe.jsx("span",{className:"inline-block mt-1 px-2 py-1 bg-primary-100 text-primary-700 text-xs font-medium rounded-full",children:"ADMIN"===(null==s?void 0:s.role)?"Administrador":"Usuario"})]})]})}),oe.jsxs("div",{className:"py-2",children:[oe.jsxs("button",{onClick:()=>S("/profile"),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-300 w-full text-left",children:[oe.jsx(i,{className:"w-4 h-4"}),oe.jsx("span",{children:"Mi Perfil"})]}),oe.jsxs("button",{onClick:()=>S("/rentals"),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-300 w-full text-left",children:[oe.jsx(c,{className:"w-4 h-4"}),oe.jsx("span",{children:"Mis Alquileres"})]}),oe.jsxs("button",{onClick:()=>S("/create-property"),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-300 w-full text-left",children:[oe.jsx(o,{className:"w-4 h-4"}),oe.jsx("span",{children:"Crear Propiedad"})]}),g&&oe.jsxs("button",{onClick:()=>S("/admin"),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-300 w-full text-left",children:[oe.jsx(d,{className:"w-4 h-4"}),oe.jsx("span",{children:"Panel Admin"})]})]}),oe.jsx("div",{className:"border-t border-gray-100 pt-2",children:oe.jsxs("button",{onClick:C,className:"flex items-center space-x-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-300 w-full text-left",children:[oe.jsx(m,{className:"w-4 h-4"}),oe.jsx("span",{children:"Cerrar Sesión"})]})})]})})]}):oe.jsxs("div",{className:"flex items-center space-x-4",children:[oe.jsx("button",{onClick:()=>S("/login"),className:"text-gray-700 hover:text-primary-600 transition-colors duration-300",children:"Iniciar Sesión"}),oe.jsx("button",{onClick:()=>S("/register"),className:"btn-primary",children:"Registrarse"})]})}),oe.jsx("div",{className:"md:hidden flex items-center",children:oe.jsx("button",{onClick:()=>f(!b),className:"text-gray-700 hover:text-primary-600 transition-colors duration-300",children:b?oe.jsx(x,{className:"w-6 h-6"}):oe.jsx(h,{className:"w-6 h-6"})})})]})}),oe.jsx(n,{children:b&&oe.jsx(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white/95 backdrop-blur-md border-t border-gray-200",children:oe.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[k.map((e=>oe.jsxs("button",{onClick:()=>S(e.path),className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-300 w-full text-left",children:[oe.jsx(e.icon,{className:"w-4 h-4"}),oe.jsx("span",{children:e.name})]},e.path))),u?oe.jsxs("div",{className:"border-t pt-2 mt-2",children:[oe.jsxs("div",{className:"px-3 py-2 text-sm text-gray-600",children:[null==s?void 0:s.username," - ","ADMIN"===(null==s?void 0:s.role)?"Administrador":"Usuario"]}),oe.jsxs("button",{onClick:()=>S("/profile"),className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:bg-primary-50 rounded-lg transition-all duration-300 w-full text-left",children:[oe.jsx(i,{className:"w-4 h-4"}),oe.jsx("span",{children:"Mi Perfil"})]}),oe.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-300 w-full text-left",children:[oe.jsx(m,{className:"w-4 h-4"}),oe.jsx("span",{children:"Cerrar Sesión"})]})]}):oe.jsxs("div",{className:"border-t pt-2 mt-2 space-y-1",children:[oe.jsx("button",{onClick:()=>S("/login"),className:"block px-3 py-2 text-gray-700 hover:bg-primary-50 rounded-lg transition-all duration-300 w-full text-left",children:"Iniciar Sesión"}),oe.jsx("button",{onClick:()=>S("/register"),className:"block px-3 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-all duration-300 w-full text-left",children:"Registrarse"})]})]})})})]})},he=()=>{const[s,a]=e.useState(!1);e.useEffect((()=>{const e=localStorage.getItem("token");a(!!e)}),[]);const i=[{icon:r,title:"Propiedades Verificadas",description:"Todas las propiedades están verificadas y son seguras para alquilar"},{icon:c,title:"Gestión Fácil",description:"Administra tus alquileres de forma simple y eficiente"},{icon:b,title:"Comunidad Confiable",description:"Conecta con propietarios e inquilinos verificados"},{icon:f,title:"Mejor Experiencia",description:"Sistema intuitivo y soporte 24/7 para todos los usuarios"}];return oe.jsxs("div",{className:"min-h-screen",children:[oe.jsxs("section",{className:"relative overflow-hidden pt-20 pb-32 px-4",children:[oe.jsx("div",{className:"max-w-7xl mx-auto",children:oe.jsxs("div",{className:"text-center",children:[oe.jsxs(t.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl md:text-7xl font-bold mb-6",children:[oe.jsx("span",{className:"bg-gradient-to-r from-primary-600 via-secondary-600 to-primary-600 bg-clip-text text-transparent",children:"Encuentra tu"}),oe.jsx("br",{}),oe.jsx("span",{className:"text-gray-800",children:"hogar perfecto"})]}),oe.jsx(t.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"La plataforma más completa para alquilar y gestionar propiedades. Conectamos propietarios e inquilinos de forma segura y eficiente."}),!s&&oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12",children:[oe.jsxs("a",{href:"/properties",className:"btn-primary text-lg px-8 py-4",children:[oe.jsx(u,{className:"w-5 h-5 mr-2"}),"Explorar Propiedades"]}),oe.jsxs("a",{href:"/register",className:"btn-secondary text-lg px-8 py-4",children:[oe.jsx(r,{className:"w-5 h-5 mr-2"}),"Unirse Gratis"]})]})]})}),oe.jsxs("div",{className:"absolute inset-0 -z-10",children:[oe.jsx(t.div,{animate:{y:[0,-20,0]},transition:{duration:6,repeat:1/0},className:"absolute top-20 left-10 w-20 h-20 bg-primary-200 rounded-full opacity-20"}),oe.jsx(t.div,{animate:{y:[0,20,0]},transition:{duration:8,repeat:1/0},className:"absolute top-40 right-20 w-32 h-32 bg-secondary-200 rounded-full opacity-20"}),oe.jsx(t.div,{animate:{y:[0,-15,0]},transition:{duration:7,repeat:1/0},className:"absolute bottom-20 left-1/4 w-16 h-16 bg-primary-300 rounded-full opacity-20"})]})]}),oe.jsx("section",{className:"py-20 px-4",children:oe.jsxs("div",{className:"max-w-7xl mx-auto",children:[oe.jsxs(t.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[oe.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"¿Por qué elegir RentMeNow?"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Ofrecemos las mejores herramientas para que encuentres o rentes tu propiedad ideal"})]}),oe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:i.map(((e,s)=>oe.jsxs(t.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2*s},whileHover:{y:-5},className:"card p-6 text-center group",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300",children:oe.jsx(e.icon,{className:"w-8 h-8 text-white"})}),oe.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.title}),oe.jsx("p",{className:"text-gray-600",children:e.description})]},s)))})]})}),!s&&oe.jsx("section",{className:"py-20 px-4",children:oe.jsx("div",{className:"max-w-4xl mx-auto",children:oe.jsxs(t.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},className:"card p-12 text-center bg-gradient-to-r from-primary-500 to-secondary-500 text-white",children:[oe.jsx("h2",{className:"text-4xl font-bold mb-4",children:"¿Listo para comenzar?"}),oe.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Únete a miles de usuarios que ya confían en RentMeNow para sus necesidades de alquiler"}),oe.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[oe.jsx("a",{href:"/register",className:"bg-white text-primary-600 px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 transform hover:scale-105",children:"Crear Cuenta Gratis"}),oe.jsx("a",{href:"/properties",className:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-primary-600 transition-all duration-300 transform hover:scale-105",children:"Explorar Propiedades"})]})]})})}),oe.jsx("footer",{className:"bg-gray-900 text-white py-16 px-4",children:oe.jsxs("div",{className:"max-w-7xl mx-auto",children:[oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[oe.jsxs("div",{className:"md:col-span-2",children:[oe.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[oe.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:oe.jsx(r,{className:"w-5 h-5 text-white"})}),oe.jsx("span",{className:"text-xl font-bold",children:"RentMeNow"})]}),oe.jsx("p",{className:"text-gray-400 mb-6 max-w-md",children:"La plataforma líder en alquiler de propiedades. Conectamos propietarios e inquilinos de forma segura y eficiente en toda España."}),oe.jsxs("div",{className:"flex space-x-4",children:[oe.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-600 transition-colors duration-300 cursor-pointer",children:oe.jsx("span",{className:"text-sm font-bold",children:"f"})}),oe.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-600 transition-colors duration-300 cursor-pointer",children:oe.jsx("span",{className:"text-sm font-bold",children:"t"})}),oe.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-600 transition-colors duration-300 cursor-pointer",children:oe.jsx("span",{className:"text-sm font-bold",children:"in"})})]})]}),oe.jsxs("div",{children:[oe.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Enlaces Rápidos"}),oe.jsxs("ul",{className:"space-y-2",children:[oe.jsx("li",{children:oe.jsx("a",{href:"/properties",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Propiedades"})}),oe.jsx("li",{children:oe.jsx("a",{href:"/create-property",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Publicar Propiedad"})}),oe.jsx("li",{children:oe.jsx("a",{href:"/rentals",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Mis Alquileres"})}),oe.jsx("li",{children:oe.jsx("a",{href:"/login",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Iniciar Sesión"})})]})]}),oe.jsxs("div",{children:[oe.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Contacto"}),oe.jsxs("div",{className:"space-y-3",children:[oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx(y,{className:"w-5 h-5 text-primary-400"}),oe.jsx("span",{className:"text-gray-400",children:"info@rentmenow.com"})]}),oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx(g,{className:"w-5 h-5 text-primary-400"}),oe.jsx("span",{className:"text-gray-400",children:"+34 900 123 456"})]}),oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx(j,{className:"w-5 h-5 text-primary-400"}),oe.jsx("span",{className:"text-gray-400",children:"Madrid, España"})]})]})]})]}),oe.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row items-center justify-between",children:[oe.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 RentMeNow. Todos los derechos reservados."}),oe.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[oe.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:"Política de Privacidad"}),oe.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:"Términos de Servicio"}),oe.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:"Cookies"})]})]})]})})]})},pe=()=>{const[s,a]=e.useState({username:"",password:""}),[r,l]=e.useState(!1),[n,c]=e.useState(!1),[o,d]=e.useState(""),m=e=>{a({...s,[e.target.name]:e.target.value})},x=(e,s="success")=>{d(e),setTimeout((()=>d("")),4e3)};return oe.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 py-20",children:[o&&oe.jsx("div",{className:"fixed top-8 left-1/2 transform -translate-x-1/2 z-50",children:oe.jsx("div",{className:"shadow-lg rounded-xl p-4 border-l-4 max-w-md "+(o.includes("Error")?"bg-red-50 border-red-500":"bg-green-50 border-green-500"),children:oe.jsx("p",{className:o.includes("Error")?"text-red-800":"text-green-800",children:o})})}),oe.jsxs(t.div,{initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8},className:"card p-8 w-full max-w-md",children:[oe.jsxs("div",{className:"text-center mb-8",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(N,{className:"w-8 h-8 text-white"})}),oe.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Iniciar Sesión"}),oe.jsx("p",{className:"text-gray-600",children:"Accede a tu cuenta de RentMeNow"})]}),oe.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),d("");try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok){const s=await e.json();localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),x("¡Bienvenido de vuelta!"),setTimeout((()=>{window.location.href="/"}),1e3)}else{const s=await e.text();x(s||"Error al iniciar sesión","error")}}catch(a){x("Error al iniciar sesión","error")}finally{c(!1)}},className:"space-y-6",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",id:"username",name:"username",value:s.username,onChange:m,className:"input-field pl-12",placeholder:"Ingresa tu usuario",required:!0})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:s.password,onChange:m,className:"input-field pl-12 pr-12",placeholder:"Ingresa tu contraseña",required:!0}),oe.jsx("button",{type:"button",onClick:()=>l(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-300",children:r?oe.jsx(w,{className:"w-5 h-5"}):oe.jsx(S,{className:"w-5 h-5"})})]})]}),oe.jsx(t.button,{type:"submit",disabled:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:n?oe.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):oe.jsxs(oe.Fragment,{children:[oe.jsx(N,{className:"w-5 h-5 mr-2"}),"Iniciar Sesión"]})})]}),oe.jsx("div",{className:"mt-6 text-center",children:oe.jsxs("p",{className:"text-gray-600",children:["¿No tienes cuenta?"," ",oe.jsx("a",{href:"/register",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Regístrate aquí"})]})})]})]})},ue=()=>{const[s,a]=e.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:""}),[r,l]=e.useState(!1),[n,c]=e.useState(!1),[o,d]=e.useState(!1),m=e=>{a({...s,[e.target.name]:e.target.value})};return oe.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-20",children:oe.jsxs(t.div,{initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8},className:"card p-8 w-full max-w-lg",children:[oe.jsxs("div",{className:"text-center mb-8",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(C,{className:"w-8 h-8 text-white"})}),oe.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Crear Cuenta"}),oe.jsx("p",{className:"text-gray-600",children:"Únete a la comunidad RentMeNow"})]}),oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:m,className:"input-field pl-12",placeholder:"Tu nombre"})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellidos"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:m,className:"input-field pl-12",placeholder:"Tus apellidos"})]})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",id:"username",name:"username",value:s.username,onChange:m,className:"input-field pl-12",placeholder:"Elige un nombre de usuario",required:!0})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:m,className:"input-field pl-12",placeholder:"tu@email.com",required:!0})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:m,className:"input-field pl-12",placeholder:"Tu número de teléfono"})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:s.password,onChange:m,className:"input-field pl-12 pr-12",placeholder:"Mínimo 6 caracteres",required:!0}),oe.jsx("button",{type:"button",onClick:()=>l(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-300",children:r?oe.jsx(w,{className:"w-5 h-5"}):oe.jsx(S,{className:"w-5 h-5"})})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contraseña *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:n?"text":"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:"input-field pl-12 pr-12",placeholder:"Repite tu contraseña",required:!0}),oe.jsx("button",{type:"button",onClick:()=>c(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-300",children:n?oe.jsx(w,{className:"w-5 h-5"}):oe.jsx(S,{className:"w-5 h-5"})})]})]}),oe.jsx(t.button,{type:"submit",disabled:o,onClick:async e=>{if(e.preventDefault(),s.password===s.confirmPassword)if(s.password.length<6)E.error("La contraseña debe tener al menos 6 caracteres");else{d(!0);try{const{confirmPassword:e,...a}=s,t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok)E.success("¡Cuenta creada exitosamente! Inicia sesión para continuar"),window.location.href="/login";else{const e=await t.text();E.error(e||"Error al crear la cuenta")}}catch(a){E.error("Error al crear la cuenta")}finally{d(!1)}}else E.error("Las contraseñas no coinciden")},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:o?oe.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):oe.jsxs(oe.Fragment,{children:[oe.jsx(C,{className:"w-5 h-5 mr-2"}),"Crear Cuenta"]})})]}),oe.jsx("div",{className:"mt-6 text-center",children:oe.jsxs("p",{className:"text-gray-600",children:["¿Ya tienes cuenta?"," ",oe.jsx("a",{href:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors duration-300",children:"Inicia sesión aquí"})]})}),oe.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:oe.jsx("p",{children:"* Campos obligatorios"})})]})})},ye=({property:s,onClick:a})=>{const[r,l]=e.useState(0),n=s.images&&s.images.length>0,c=n&&s.images.length>1;return oe.jsxs(t.div,{whileHover:{y:-5,scale:1.02},transition:{duration:.3},className:"card p-6 group cursor-pointer",onClick:a,children:[oe.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",children:[n?oe.jsxs("div",{className:"relative h-48 group",children:[oe.jsx("img",{src:s.images[r],alt:s.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),oe.jsx("div",{className:"h-48 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",style:{display:"none"},children:oe.jsx("span",{className:"text-white text-4xl font-bold",children:s.title.charAt(0)})}),c&&oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:e=>{e.stopPropagation(),c&&l((e=>(e-1+s.images.length)%s.images.length))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/70",children:oe.jsx(P,{className:"w-4 h-4"})}),oe.jsx("button",{onClick:e=>{e.stopPropagation(),c&&l((e=>(e+1)%s.images.length))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/70",children:oe.jsx(I,{className:"w-4 h-4"})}),oe.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:s.images.map(((e,s)=>oe.jsx("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 "+(s===r?"bg-white":"bg-white/50")},s)))})]})]}):oe.jsx("div",{className:"h-48 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",children:oe.jsx("span",{className:"text-white text-4xl font-bold",children:s.title.charAt(0)})}),oe.jsx("div",{className:"absolute top-3 right-3 flex flex-col space-y-1",children:s.available?oe.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Disponible"}):oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Ocupado"}),s.occupiedUntil&&oe.jsxs("div",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center",children:[oe.jsx(D,{className:"w-3 h-3 mr-1"}),(o=s.occupiedUntil,o?new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):null)]})]})})]}),oe.jsxs("div",{className:"space-y-3",children:[oe.jsx("h3",{className:"text-xl font-semibold text-gray-800 group-hover:text-primary-600 transition-colors duration-300",children:s.title}),oe.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:s.description}),oe.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[oe.jsx(j,{className:"w-4 h-4 mr-1"}),oe.jsxs("span",{children:[s.address,", ",s.city]})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[oe.jsxs("div",{className:"flex items-center",children:[oe.jsx(A,{className:"w-4 h-4 mr-1"}),oe.jsx("span",{children:s.bedrooms})]}),oe.jsxs("div",{className:"flex items-center",children:[oe.jsx(q,{className:"w-4 h-4 mr-1"}),oe.jsx("span",{children:s.bathrooms})]})]}),oe.jsxs("div",{className:"flex items-center text-primary-600 font-semibold",children:[oe.jsx(R,{className:"w-4 h-4 mr-1"}),oe.jsxs("span",{children:[s.price,"/mes"]})]})]}),oe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[oe.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[oe.jsx(i,{className:"w-4 h-4 mr-1"}),oe.jsx("span",{className:"hover:text-primary-600 transition-colors duration-300 cursor-pointer",children:s.ownerUsername})]}),s.categoryName&&oe.jsx("span",{className:"bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium",children:s.categoryName})]})]})]});var o},ge=()=>{const[s,a]=e.useState([]),[r,i]=e.useState([]),[l,n]=e.useState(!0),[c,o]=e.useState("grid"),[d,m]=e.useState({search:"",city:"",minPrice:"",maxPrice:"",bedrooms:"",available:"all"});e.useEffect((()=>{x()}),[]),e.useEffect((()=>{h()}),[s,d]);const x=async()=>{try{const e=await fetch("/api/properties"),s=await e.json();a(s)}catch(e){E.error("Error al cargar las propiedades")}finally{n(!1)}},h=()=>{let e=[...s];d.search&&(e=e.filter((e=>e.title.toLowerCase().includes(d.search.toLowerCase())||e.description.toLowerCase().includes(d.search.toLowerCase())||e.address.toLowerCase().includes(d.search.toLowerCase())))),d.city&&(e=e.filter((e=>e.city.toLowerCase().includes(d.city.toLowerCase())))),d.minPrice&&(e=e.filter((e=>parseFloat(e.price)>=parseFloat(d.minPrice)))),d.maxPrice&&(e=e.filter((e=>parseFloat(e.price)<=parseFloat(d.maxPrice)))),d.bedrooms&&(e=e.filter((e=>e.bedrooms>=parseInt(d.bedrooms)))),"all"!==d.available&&(e=e.filter((e=>e.available===("true"===d.available)))),i(e)},p=e=>{m({...d,[e.target.name]:e.target.value})},y=()=>{m({search:"",city:"",minPrice:"",maxPrice:"",bedrooms:"",available:"all"})},g=e=>{window.location.href=`/properties/${e}`},b=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):null,f=[...new Set(s.map((e=>e.city)))].sort(),N=({property:s})=>{const[a,t]=e.useState(0),r=s.images&&s.images.length>0,i=r&&s.images.length>1;return oe.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-primary-400 to-secondary-400 rounded-xl overflow-hidden group",children:[r?oe.jsxs(oe.Fragment,{children:[oe.jsx("img",{src:s.images[a],alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),oe.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center absolute top-0 left-0",style:{display:"none"},children:oe.jsx("span",{className:"text-white text-4xl font-bold",children:s.title.charAt(0)})})]}):oe.jsx("div",{className:"w-full h-full flex items-center justify-center",children:oe.jsx("span",{className:"text-white text-4xl font-bold",children:s.title.charAt(0)})}),i&&oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:e=>{e.stopPropagation(),i&&t((e=>(e-1+s.images.length)%s.images.length))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(P,{className:"w-4 h-4"})}),oe.jsx("button",{onClick:e=>{e.stopPropagation(),i&&t((e=>(e+1)%s.images.length))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(I,{className:"w-4 h-4"})})]}),oe.jsx("div",{className:"absolute top-3 right-3 flex flex-col space-y-1",children:s.available?oe.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Disponible"}):oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Ocupado"}),s.occupiedUntil&&oe.jsxs("div",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center",children:[oe.jsx(D,{className:"w-3 h-3 mr-1"}),b(s.occupiedUntil)]})]})})]})};return l?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):oe.jsx("div",{className:"min-h-screen pt-20 px-4",children:oe.jsxs("div",{className:"max-w-7xl mx-auto",children:[oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Encuentra tu Propiedad Ideal"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Explora nuestra amplia selección de propiedades disponibles para alquilar"})]}),oe.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"card p-6 mb-8",children:[oe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[oe.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 flex items-center",children:[oe.jsx(O,{className:"w-6 h-6 mr-2"}),"Filtros"]}),oe.jsx("button",{onClick:y,className:"text-primary-600 hover:text-primary-700 font-medium transition-colors duration-300",children:"Limpiar Filtros"})]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[oe.jsx("div",{className:"lg:col-span-2",children:oe.jsxs("div",{className:"relative",children:[oe.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",name:"search",value:d.search,onChange:p,placeholder:"Buscar por título, descripción o dirección...",className:"input-field pl-12"})]})}),oe.jsx("div",{children:oe.jsxs("select",{name:"city",value:d.city,onChange:p,className:"input-field",children:[oe.jsx("option",{value:"",children:"Todas las ciudades"}),f.map((e=>oe.jsx("option",{value:e,children:e},e)))]})}),oe.jsx("div",{children:oe.jsxs("select",{name:"available",value:d.available,onChange:p,className:"input-field",children:[oe.jsx("option",{value:"all",children:"Todas"}),oe.jsx("option",{value:"true",children:"Disponibles"}),oe.jsx("option",{value:"false",children:"Ocupadas"})]})}),oe.jsx("div",{children:oe.jsxs("div",{className:"relative",children:[oe.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"number",name:"minPrice",value:d.minPrice,onChange:p,placeholder:"Precio mínimo",className:"input-field pl-12"})]})}),oe.jsx("div",{children:oe.jsxs("div",{className:"relative",children:[oe.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"number",name:"maxPrice",value:d.maxPrice,onChange:p,placeholder:"Precio máximo",className:"input-field pl-12"})]})}),oe.jsx("div",{children:oe.jsxs("div",{className:"relative",children:[oe.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsxs("select",{name:"bedrooms",value:d.bedrooms,onChange:p,className:"input-field pl-12",children:[oe.jsx("option",{value:"",children:"Cualquier habitación"}),oe.jsx("option",{value:"1",children:"1+ habitación"}),oe.jsx("option",{value:"2",children:"2+ habitaciones"}),oe.jsx("option",{value:"3",children:"3+ habitaciones"}),oe.jsx("option",{value:"4",children:"4+ habitaciones"})]})]})})]})]}),oe.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex items-center justify-between mb-8",children:[oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800",children:[r.length," Propiedades Encontradas"]}),oe.jsxs("p",{className:"text-gray-600 mt-1",children:[r.filter((e=>e.available)).length," disponibles para alquilar"]})]}),oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx("button",{onClick:()=>o("grid"),className:"p-2 rounded-lg transition-colors duration-300 "+("grid"===c?"bg-primary-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:oe.jsx(T,{className:"w-5 h-5"})}),oe.jsx("button",{onClick:()=>o("list"),className:"p-2 rounded-lg transition-colors duration-300 "+("list"===c?"bg-primary-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:oe.jsx(F,{className:"w-5 h-5"})})]})]}),0===r.length?oe.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"text-center py-20",children:[oe.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:oe.jsx(u,{className:"w-12 h-12 text-gray-400"})}),oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"No se encontraron propiedades"}),oe.jsx("p",{className:"text-gray-600 mb-6",children:"Intenta ajustar tus filtros para encontrar más resultados"}),oe.jsx("button",{onClick:y,className:"btn-primary",children:"Limpiar Filtros"})]}):oe.jsx("div",{className:"grid gap-8 "+("grid"===c?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:r.map(((e,s)=>oe.jsx(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1*s},children:"grid"===c?oe.jsx(ye,{property:e,onClick:()=>g(e.id)}):oe.jsxs("div",{className:"card p-6 flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:()=>g(e.id),children:[oe.jsx("div",{className:"md:w-1/3",children:oe.jsx(N,{property:e})}),oe.jsxs("div",{className:"md:w-2/3 space-y-3",children:[oe.jsxs("div",{className:"flex items-start justify-between",children:[oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800 hover:text-primary-600 transition-colors duration-300",children:e.title}),oe.jsxs("div",{className:"flex items-center text-primary-600 font-bold text-xl",children:[oe.jsx(R,{className:"w-5 h-5 mr-1"}),oe.jsxs("span",{children:[e.price,"/mes"]})]})]}),oe.jsx("p",{className:"text-gray-600",children:e.description}),oe.jsxs("div",{className:"flex items-center text-gray-500",children:[oe.jsx(j,{className:"w-4 h-4 mr-1"}),oe.jsxs("span",{children:[e.address,", ",e.city]})]}),!e.available&&e.occupiedUntil&&oe.jsxs("div",{className:"flex items-center text-orange-600 bg-orange-50 px-3 py-2 rounded-lg",children:[oe.jsx(D,{className:"w-4 h-4 mr-2"}),oe.jsxs("span",{className:"text-sm font-medium",children:["Disponible desde: ",b(e.occupiedUntil)]})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsxs("div",{className:"flex items-center space-x-6 text-gray-600",children:[oe.jsxs("div",{className:"flex items-center",children:[oe.jsx(A,{className:"w-5 h-5 mr-2"}),oe.jsxs("span",{children:[e.bedrooms," habitaciones"]})]}),oe.jsxs("div",{className:"flex items-center",children:[oe.jsx(q,{className:"w-5 h-5 mr-2"}),oe.jsxs("span",{children:[e.bathrooms," baños"]})]})]}),e.categoryName&&oe.jsx("span",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium",children:e.categoryName})]}),oe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[oe.jsxs("div",{className:"text-sm text-gray-500",children:["Propietario:",oe.jsx("span",{className:"text-primary-600 hover:text-primary-700 ml-1 cursor-pointer font-medium",children:e.ownerUsername})]}),oe.jsx("div",{className:"flex space-x-2",children:e.available?oe.jsx("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium",children:"Solicitar Alquiler"}):oe.jsx("span",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-medium",children:"Solicitar para Futuro"})})]})]})]})},e.id)))})]})})},je=()=>{const[s,a]=e.useState(null),[r,l]=e.useState(null),[n,o]=e.useState(!1),[d,m]=e.useState(!0),[x,h]=e.useState(0),[p,u]=e.useState("");e.useEffect((()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{const e=JSON.parse(s);l(e),o(!0)}catch(r){localStorage.removeItem("token"),localStorage.removeItem("user")}const a=window.location.pathname.split("/"),t=a[a.length-1];t&&!isNaN(t)?y(t):m(!1)}),[]);const y=async e=>{try{const s=await fetch(`/api/properties/${e}`);if(s.ok){const e=await s.json();a(e)}else u("Error al cargar la propiedad"),setTimeout((()=>{window.location.href="/properties"}),2e3)}catch(s){u("Error al cargar la propiedad"),setTimeout((()=>{window.location.href="/properties"}),2e3)}finally{m(!1)}},g=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):null,b=r&&(r.username===(null==s?void 0:s.ownerUsername)||"ADMIN"===r.role),f=n&&(null==s?void 0:s.available)&&(null==r?void 0:r.username)!==(null==s?void 0:s.ownerUsername);return d?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):s?oe.jsxs("div",{className:"min-h-screen pt-20 px-4",children:[p&&oe.jsx("div",{className:"fixed top-8 left-1/2 transform -translate-x-1/2 z-50",children:oe.jsx("div",{className:"shadow-lg rounded-xl p-4 border-l-4 max-w-md "+(p.includes("Error")?"bg-red-50 border-red-500":"bg-green-50 border-green-500"),children:oe.jsx("p",{className:p.includes("Error")?"text-red-800":"text-green-800",children:p})})}),oe.jsxs("div",{className:"max-w-6xl mx-auto",children:[oe.jsxs(t.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>{window.history.back()},className:"flex items-center text-gray-600 hover:text-primary-600 transition-colors duration-300 mb-8",children:[oe.jsx(M,{className:"w-5 h-5 mr-2"}),"Volver"]}),oe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[oe.jsxs("div",{className:"lg:col-span-2",children:[oe.jsx(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative overflow-hidden rounded-2xl mb-8",children:oe.jsxs("div",{className:"relative h-96 group",children:[s.images&&s.images.length>0?oe.jsxs(oe.Fragment,{children:[oe.jsx("img",{src:s.images[x],alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),oe.jsx("div",{className:"h-96 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",style:{display:"none"},children:oe.jsx("span",{className:"text-white text-8xl font-bold",children:s.title.charAt(0)})}),s.images.length>1&&oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:()=>{s.images&&s.images.length>1&&h((e=>(e-1+s.images.length)%s.images.length))},className:"absolute left-6 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(P,{className:"w-6 h-6"})}),oe.jsx("button",{onClick:()=>{s.images&&s.images.length>1&&h((e=>(e+1)%s.images.length))},className:"absolute right-6 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(I,{className:"w-6 h-6"})}),oe.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:s.images.map(((e,s)=>oe.jsx("button",{onClick:()=>h(s),className:"w-3 h-3 rounded-full transition-colors duration-300 "+(s===x?"bg-white":"bg-white/50")},s)))})]})]}):oe.jsx("div",{className:"h-96 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",children:oe.jsx("span",{className:"text-white text-8xl font-bold",children:s.title.charAt(0)})}),oe.jsx("div",{className:"absolute top-6 right-6",children:s.available?oe.jsxs("div",{className:"bg-green-500 text-white px-4 py-2 rounded-full font-semibold flex items-center",children:[oe.jsx(L,{className:"w-5 h-5 mr-2"}),"Disponible"]}):oe.jsxs("div",{className:"flex flex-col space-y-2",children:[oe.jsxs("div",{className:"bg-red-500 text-white px-4 py-2 rounded-full font-semibold flex items-center",children:[oe.jsx(U,{className:"w-5 h-5 mr-2"}),"Ocupado"]}),s.occupiedUntil&&oe.jsxs("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:["Hasta: ",g(s.occupiedUntil)]})]})})]})}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"card p-8 mb-8",children:[oe.jsxs("div",{className:"flex items-start justify-between mb-6",children:[oe.jsxs("div",{children:[oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:s.title}),oe.jsxs("div",{className:"flex items-center text-gray-600 text-lg",children:[oe.jsx(j,{className:"w-5 h-5 mr-2"}),oe.jsxs("span",{children:[s.address,", ",s.city]})]})]}),b&&oe.jsxs("div",{className:"flex items-center space-x-2",children:[oe.jsx("button",{className:"p-2 bg-primary-100 text-primary-600 rounded-lg hover:bg-primary-200 transition-colors duration-300",children:oe.jsx(z,{className:"w-5 h-5"})}),oe.jsx("button",{onClick:async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta propiedad?"))try{(await fetch(`/api/properties/${s.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?(u("Propiedad eliminada exitosamente"),setTimeout((()=>{window.location.href="/properties"}),1e3)):u("Error al eliminar la propiedad")}catch(e){u("Error al eliminar la propiedad")}},className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors duration-300",children:oe.jsx($,{className:"w-5 h-5"})})]})]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[oe.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl",children:[oe.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:oe.jsx(A,{className:"w-6 h-6 text-primary-600"})}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm text-gray-600",children:"Habitaciones"}),oe.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.bedrooms})]})]}),oe.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl",children:[oe.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center",children:oe.jsx(q,{className:"w-6 h-6 text-secondary-600"})}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm text-gray-600",children:"Baños"}),oe.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.bathrooms})]})]}),oe.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl",children:[oe.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:oe.jsx(R,{className:"w-6 h-6 text-green-600"})}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm text-gray-600",children:"Precio/mes"}),oe.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["€",s.price]})]})]})]}),oe.jsxs("div",{className:"mb-8",children:[oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Descripción"}),oe.jsx("p",{className:"text-gray-600 leading-relaxed text-lg",children:s.description})]}),oe.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:oe.jsx(i,{className:"w-6 h-6 text-gray-600"})}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm text-gray-600",children:"Propietario"}),oe.jsx("button",{onClick:()=>window.location.href=`/profile/${s.ownerUsername}`,className:"font-semibold text-gray-800 hover:text-primary-600 transition-colors duration-300",children:s.ownerUsername})]})]}),s.categoryName&&oe.jsx("span",{className:"bg-primary-100 text-primary-700 px-4 py-2 rounded-full font-medium",children:s.categoryName})]})]})]}),oe.jsx("div",{className:"lg:col-span-1",children:oe.jsxs(t.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},className:"card p-6 sticky top-24",children:[oe.jsxs("div",{className:"text-center mb-6",children:[oe.jsxs("div",{className:"text-4xl font-bold text-primary-600 mb-2",children:["€",s.price]}),oe.jsx("p",{className:"text-gray-600",children:"por mes"})]}),f||!s.available?oe.jsxs("div",{className:"space-y-4",children:[oe.jsxs("button",{onClick:()=>{window.location.href=n?`/create-rental/${s.id}`:"/login"},className:"w-full btn-primary flex items-center justify-center",children:[oe.jsx(c,{className:"w-5 h-5 mr-2"}),s.available?"Solicitar Alquiler":"Solicitar para Futuro"]}),oe.jsx("p",{className:"text-sm text-gray-600 text-center",children:s.available?"Envía una solicitud al propietario":`Disponible desde: ${g(s.occupiedUntil)}`})]}):n?oe.jsxs("div",{className:"text-center",children:[oe.jsx("div",{className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-semibold",children:"Esta es tu propiedad"}),oe.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No puedes solicitar el alquiler de tu propia propiedad"})]}):oe.jsxs("div",{className:"space-y-4",children:[oe.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full btn-primary flex items-center justify-center",children:"Iniciar Sesión para Solicitar"}),oe.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Necesitas una cuenta para solicitar alquileres"})]}),oe.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[oe.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Detalles de la Propiedad"}),oe.jsxs("div",{className:"space-y-3 text-sm",children:[oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{className:"text-gray-600",children:"Estado:"}),oe.jsx("span",{className:"font-medium "+(s.available?"text-green-600":"text-red-600"),children:s.available?"Disponible":"Ocupado"})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{className:"text-gray-600",children:"Habitaciones:"}),oe.jsx("span",{className:"font-medium text-gray-800",children:s.bedrooms})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{className:"text-gray-600",children:"Baños:"}),oe.jsx("span",{className:"font-medium text-gray-800",children:s.bathrooms})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{className:"text-gray-600",children:"Ciudad:"}),oe.jsx("span",{className:"font-medium text-gray-800",children:s.city})]}),s.categoryName&&oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{className:"text-gray-600",children:"Categoría:"}),oe.jsx("span",{className:"font-medium text-gray-800",children:s.categoryName})]})]})]})]})})]})]})]}):oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsxs("div",{className:"text-center",children:[p&&oe.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:oe.jsx("p",{className:"text-red-700",children:p})}),oe.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Propiedad no encontrada"}),oe.jsx("button",{onClick:()=>window.location.href="/properties",className:"btn-primary",children:"Volver a Propiedades"})]})})},be=()=>{const[s,a]=e.useState(!1),[i,l]=e.useState({title:"",description:"",address:"",city:"",price:"",bedrooms:1,bathrooms:1,images:[]}),[n,c]=e.useState({}),d=e=>{const{name:s,value:a,type:t}=e.target;n[s]&&c({...n,[s]:""}),l({...i,[s]:"number"===t?""===a?"":parseInt(a)||"":a})},m=()=>{window.history.back()};return oe.jsx("div",{className:"min-h-screen pt-20 px-4",children:oe.jsxs("div",{className:"max-w-4xl mx-auto",children:[oe.jsxs(t.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:m,className:"flex items-center text-gray-600 hover:text-primary-600 transition-colors duration-300 mb-8",children:[oe.jsx(M,{className:"w-5 h-5 mr-2"}),"Volver"]}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(r,{className:"w-8 h-8 text-white"})}),oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Crear Nueva Propiedad"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Completa la información para publicar tu propiedad en RentMeNow"})]}),oe.jsx(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"card p-8",children:oe.jsxs("div",{className:"space-y-8",children:[oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(H,{className:"w-6 h-6 mr-2"}),"Información Básica"]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[oe.jsxs("div",{className:"md:col-span-2",children:[oe.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título de la Propiedad *"}),oe.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:d,className:"input-field "+(n.title?"border-red-500":""),placeholder:"Ej: Hermoso apartamento en el centro"}),n.title&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.title})]}),oe.jsxs("div",{className:"md:col-span-2",children:[oe.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción *"}),oe.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:d,rows:4,className:"input-field resize-none "+(n.description?"border-red-500":""),placeholder:"Describe tu propiedad, sus características y comodidades..."}),n.description&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.description}),oe.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[i.description.length,"/20 caracteres mínimo"]})]})]})]}),oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(B,{className:"w-6 h-6 mr-2"}),"Imágenes de la Propiedad"]}),oe.jsxs("div",{className:"space-y-4",children:[oe.jsxs("button",{type:"button",onClick:()=>{const e=prompt("Ingresa la URL de la imagen:");e&&e.trim()&&l({...i,images:[...i.images,e.trim()]})},className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-400 hover:bg-primary-50 transition-colors duration-300",children:[oe.jsx(o,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),oe.jsx("p",{className:"text-gray-600",children:"Agregar URL de imagen"}),oe.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Haz clic para agregar una imagen desde una URL"})]}),i.images.length>0&&oe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.images.map(((e,s)=>oe.jsxs("div",{className:"relative group",children:[oe.jsx("img",{src:e,alt:`Imagen ${s+1}`,className:"w-full h-32 object-cover rounded-lg",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDIwMCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04NyA3NEw3NCA2MUw2MSA3NEw3NCA4N0w4NyA3NFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHN2Zz4K"}}),oe.jsx("button",{onClick:()=>(e=>{l({...i,images:i.images.filter(((s,a)=>a!==e))})})(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(x,{className:"w-4 h-4"})}),oe.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:s+1})]},s)))})]})]}),oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(j,{className:"w-6 h-6 mr-2"}),"Ubicación"]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección *"}),oe.jsx("input",{type:"text",id:"address",name:"address",value:i.address,onChange:d,className:"input-field "+(n.address?"border-red-500":""),placeholder:"Calle y número"}),n.address&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.address})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad *"}),oe.jsx("input",{type:"text",id:"city",name:"city",value:i.city,onChange:d,className:"input-field "+(n.city?"border-red-500":""),placeholder:"Ciudad"}),n.city&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.city})]})]})]}),oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(r,{className:"w-6 h-6 mr-2"}),"Detalles de la Propiedad"]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio por Mes (€) *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"number",id:"price",name:"price",value:i.price,onChange:d,className:"input-field pl-12 "+(n.price?"border-red-500":""),placeholder:"800",min:"50",max:"10000",step:"0.01"})]}),n.price&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.price}),oe.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Entre €50 y €10,000"})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Habitaciones *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("select",{id:"bedrooms",name:"bedrooms",value:i.bedrooms,onChange:d,className:"input-field pl-12 "+(n.bedrooms?"border-red-500":""),children:[1,2,3,4,5,6].map((e=>oe.jsxs("option",{value:e,children:[e," habitación",e>1?"es":""]},e)))})]}),n.bedrooms&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.bedrooms})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Baños *"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("select",{id:"bathrooms",name:"bathrooms",value:i.bathrooms,onChange:d,className:"input-field pl-12 "+(n.bathrooms?"border-red-500":""),children:[1,2,3,4].map((e=>oe.jsxs("option",{value:e,children:[e," baño",e>1?"s":""]},e)))})]}),n.bathrooms&&oe.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.bathrooms})]})]})]}),oe.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[oe.jsx("button",{type:"button",onClick:m,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors duration-300",children:"Cancelar"}),oe.jsxs(t.button,{type:"submit",disabled:s,onClick:async e=>{if(e.preventDefault(),(()=>{const e={};if(i.title.trim()?i.title.trim().length<5&&(e.title="El título debe tener al menos 5 caracteres"):e.title="El título es obligatorio",i.description.trim()?i.description.trim().length<20&&(e.description="La descripción debe tener al menos 20 caracteres"):e.description="La descripción es obligatoria",i.address.trim()||(e.address="La dirección es obligatoria"),i.city.trim()||(e.city="La ciudad es obligatoria"),i.price&&""!==i.price){const s=parseFloat(i.price);isNaN(s)||s<=0?e.price="El precio debe ser un número mayor a 0":s<50?e.price="El precio debe ser al menos €50":s>1e4&&(e.price="El precio no puede ser mayor a €10,000")}else e.price="El precio es obligatorio";return(!i.bedrooms||i.bedrooms<1)&&(e.bedrooms="Debe tener al menos 1 habitación"),(!i.bathrooms||i.bathrooms<1)&&(e.bathrooms="Debe tener al menos 1 baño"),c(e),0===Object.keys(e).length})()){a(!0);try{const e={...i,price:parseFloat(i.price),bedrooms:parseInt(i.bedrooms),bathrooms:parseInt(i.bathrooms)},s=await fetch("/api/properties",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(s.ok)E.success("¡Propiedad creada exitosamente!"),window.location.href="/properties";else{const e=await s.text();E.error(e||"Error al crear la propiedad")}}catch(s){E.error("Error al crear la propiedad")}finally{a(!1)}}else E.error("Por favor, corrige los errores en el formulario")},whileHover:{scale:s?1:1.02},whileTap:{scale:s?1:.98},className:"btn-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s?oe.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):oe.jsx(r,{className:"w-5 h-5 mr-2"}),s?"Creando...":"Crear Propiedad"]})]}),Object.keys(n).length>0&&oe.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[oe.jsx("h4",{className:"text-red-800 font-semibold mb-2",children:"⚠️ Por favor, corrige los siguientes errores:"}),oe.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:Object.entries(n).map((([e,s])=>oe.jsxs("li",{children:["• ",s]},e)))})]})]})}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-8 p-6 bg-primary-50 rounded-xl",children:[oe.jsx("h4",{className:"text-lg font-semibold text-primary-800 mb-3",children:"💡 Consejos para una buena publicación"}),oe.jsxs("ul",{className:"text-primary-700 space-y-2 text-sm",children:[oe.jsx("li",{children:"• Usa un título descriptivo y atractivo (mínimo 5 caracteres)"}),oe.jsx("li",{children:"• Escribe una descripción detallada (mínimo 20 caracteres)"}),oe.jsx("li",{children:"• Puedes agregar imágenes usando URLs de servicios como Imgur"}),oe.jsx("li",{children:"• Asegúrate de que el precio sea competitivo (€50 - €10,000)"}),oe.jsx("li",{children:"• Verifica que la dirección y ciudad sean correctas"}),oe.jsx("li",{children:"• Los campos marcados con * son obligatorios"})]})]})]})})},fe=()=>{const[s,a]=e.useState(null),[l,n]=e.useState([]),[o,d]=e.useState([]),[m,h]=e.useState("my-requests"),[p,u]=e.useState(!0),[y,g]=e.useState("");e.useEffect((()=>{const e=localStorage.getItem("user");e&&a(JSON.parse(e)),j()}),[]);const j=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/rentals/my-requests",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();n(e)}const a=await fetch("/api/rentals/property-requests",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const e=await a.json();d(e)}}catch(e){b("Error al cargar los alquileres","error")}finally{u(!1)}},b=(e,s="success")=>{g(e),setTimeout((()=>g("")),4e3)},f=e=>{switch(e){case"APPROVED":return oe.jsx(L,{className:"w-5 h-5 text-green-500"});case"REJECTED":return oe.jsx(_,{className:"w-5 h-5 text-red-500"});case"PENDING":return oe.jsx(U,{className:"w-5 h-5 text-yellow-500"});default:return oe.jsx(J,{className:"w-5 h-5 text-gray-500"})}},N=e=>{switch(e){case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{switch(e){case"APPROVED":return"Aprobada";case"REJECTED":return"Rechazada";case"PENDING":return"Pendiente";default:return e}},w=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});return p?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):oe.jsxs("div",{className:"min-h-screen pt-20 px-4",children:[y&&oe.jsx("div",{className:"fixed top-8 left-1/2 transform -translate-x-1/2 z-50",children:oe.jsx("div",{className:"shadow-lg rounded-xl p-4 border-l-4 max-w-md "+(y.includes("Error")?"bg-red-50 border-red-500":"bg-green-50 border-green-500"),children:oe.jsx("p",{className:y.includes("Error")?"text-red-800":"text-green-800",children:y})})}),oe.jsxs("div",{className:"max-w-7xl mx-auto",children:[oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(c,{className:"w-8 h-8 text-white"})}),oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Gestión de Alquileres"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Administra tus solicitudes de alquiler y las peticiones para tus propiedades"})]}),oe.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"flex justify-center mb-8",children:oe.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[oe.jsxs("button",{onClick:()=>h("my-requests"),className:"px-6 py-3 rounded-lg transition-all duration-300 "+("my-requests"===m?"bg-white text-primary-600 shadow-md":"text-gray-600 hover:text-gray-800"),children:["Mis Solicitudes (",l.length,")"]}),oe.jsxs("button",{onClick:()=>h("property-requests"),className:"px-6 py-3 rounded-lg transition-all duration-300 "+("property-requests"===m?"bg-white text-primary-600 shadow-md":"text-gray-600 hover:text-gray-800"),children:["Solicitudes Recibidas (",o.length,")"]})]})}),oe.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:"my-requests"===m?oe.jsx("div",{className:"space-y-6",children:0===l.length?oe.jsxs("div",{className:"text-center py-20",children:[oe.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:oe.jsx(c,{className:"w-12 h-12 text-gray-400"})}),oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"No hay solicitudes enviadas"}),oe.jsx("p",{className:"text-gray-600 mb-6",children:"Aún no has enviado ninguna solicitud de alquiler"}),oe.jsx("button",{onClick:()=>window.location.href="/properties",className:"btn-primary",children:"Explorar Propiedades"})]}):l.map(((e,s)=>oe.jsx(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1*s},className:"card p-6",children:oe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[oe.jsxs("div",{className:"flex-1 space-y-3",children:[oe.jsxs("div",{className:"flex items-start justify-between",children:[oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[oe.jsx(r,{className:"w-5 h-5 mr-2"}),e.propertyTitle]}),oe.jsxs("p",{className:"text-gray-600 mt-1",children:["Solicitud enviada el ",w(e.createdAt)]})]}),oe.jsxs("span",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${N(e.status)}`,children:[f(e.status),oe.jsx("span",{className:"ml-2",children:v(e.status)})]})]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(D,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Desde:"})," ",w(e.startDate)]})]}),oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(D,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Hasta:"})," ",w(e.endDate)]})]}),oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(R,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Propuesta:"})," €",e.monthlyRent,"/mes"]})]})]}),e.requestMessage&&oe.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[oe.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Tu mensaje:"}),oe.jsx("p",{className:"text-gray-700",children:e.requestMessage})]}),e.responseMessage&&oe.jsxs("div",{className:"p-3 rounded-lg "+("APPROVED"===e.status?"bg-green-50":"bg-red-50"),children:[oe.jsx("p",{className:"text-sm font-medium mb-1 "+("APPROVED"===e.status?"text-green-600":"text-red-600"),children:"Respuesta del propietario:"}),oe.jsx("p",{className:"APPROVED"===e.status?"text-green-700":"text-red-700",children:e.responseMessage})]})]}),oe.jsxs("div",{className:"flex items-center space-x-3",children:["PENDING"===e.status&&oe.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta solicitud?"))try{const s=localStorage.getItem("token");(await fetch(`/api/rentals/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok?(b("Solicitud eliminada exitosamente"),j()):b("Error al eliminar la solicitud","error")}catch(s){b("Error al eliminar la solicitud","error")}})(e.id),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors duration-300",children:"Cancelar"}),oe.jsx("button",{onClick:()=>window.location.href=`/properties/${e.propertyId}`,className:"px-4 py-2 bg-primary-100 text-primary-600 rounded-lg hover:bg-primary-200 transition-colors duration-300",children:"Ver Propiedad"})]})]})},e.id)))}):oe.jsx("div",{className:"space-y-6",children:0===o.length?oe.jsxs("div",{className:"text-center py-20",children:[oe.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:oe.jsx(V,{className:"w-12 h-12 text-gray-400"})}),oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"No hay solicitudes recibidas"}),oe.jsx("p",{className:"text-gray-600 mb-6",children:"Aún no has recibido solicitudes para tus propiedades"}),oe.jsx("button",{onClick:()=>window.location.href="/create-property",className:"btn-primary",children:"Publicar Propiedad"})]}):o.map(((e,s)=>oe.jsx(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1*s},className:"card p-6",children:oe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[oe.jsxs("div",{className:"flex-1 space-y-3",children:[oe.jsxs("div",{className:"flex items-start justify-between",children:[oe.jsxs("div",{children:[oe.jsxs("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[oe.jsx(r,{className:"w-5 h-5 mr-2"}),e.propertyTitle]}),oe.jsxs("div",{className:"flex items-center mt-1 text-gray-600",children:[oe.jsx(i,{className:"w-4 h-4 mr-1"}),oe.jsxs("span",{children:["Solicitante: ",e.tenantUsername]})]}),oe.jsxs("p",{className:"text-gray-600 text-sm",children:["Solicitud recibida el ",w(e.createdAt)]})]}),oe.jsxs("span",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${N(e.status)}`,children:[f(e.status),oe.jsx("span",{className:"ml-2",children:v(e.status)})]})]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(D,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Desde:"})," ",w(e.startDate)]})]}),oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(D,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Hasta:"})," ",w(e.endDate)]})]}),oe.jsxs("div",{className:"flex items-center text-gray-600",children:[oe.jsx(R,{className:"w-4 h-4 mr-2"}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium",children:"Propuesta:"})," €",e.monthlyRent,"/mes"]})]})]}),e.requestMessage&&oe.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[oe.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Mensaje del solicitante:"}),oe.jsx("p",{className:"text-blue-700",children:e.requestMessage})]}),e.responseMessage&&oe.jsxs("div",{className:"p-3 rounded-lg "+("APPROVED"===e.status?"bg-green-50":"bg-red-50"),children:[oe.jsx("p",{className:"text-sm font-medium mb-1 "+("APPROVED"===e.status?"text-green-600":"text-red-600"),children:"Tu respuesta:"}),oe.jsx("p",{className:"APPROVED"===e.status?"text-green-700":"text-red-700",children:e.responseMessage})]})]}),oe.jsxs("div",{className:"flex items-center space-x-3",children:["PENDING"===e.status&&oe.jsxs(oe.Fragment,{children:[oe.jsxs("button",{onClick:()=>(async e=>{const s=prompt("Motivo del rechazo (opcional):");try{const a=localStorage.getItem("token");(await fetch(`/api/rentals/${e}/reject?message=${encodeURIComponent(s||"")}`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok?(b("Solicitud rechazada"),j()):b("Error al rechazar la solicitud","error")}catch(a){b("Error al rechazar la solicitud","error")}})(e.id),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors duration-300 flex items-center",children:[oe.jsx(x,{className:"w-4 h-4 mr-1"}),"Rechazar"]}),oe.jsxs("button",{onClick:()=>(async e=>{const s=prompt("Mensaje de respuesta (opcional):");try{const a=localStorage.getItem("token");(await fetch(`/api/rentals/${e}/approve?message=${encodeURIComponent(s||"")}`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok?(b("Solicitud aprobada exitosamente"),j()):b("Error al aprobar la solicitud","error")}catch(a){b("Error al aprobar la solicitud","error")}})(e.id),className:"px-4 py-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors duration-300 flex items-center",children:[oe.jsx(G,{className:"w-4 h-4 mr-1"}),"Aprobar"]})]}),oe.jsx("button",{onClick:()=>window.location.href=`/properties/${e.propertyId}`,className:"px-4 py-2 bg-primary-100 text-primary-600 rounded-lg hover:bg-primary-200 transition-colors duration-300",children:"Ver Propiedad"})]})]})},e.id)))})})]})]})},Ne=()=>{const[s,a]=e.useState(null),[l,n]=e.useState(null),[o,d]=e.useState(!1),[m,x]=e.useState(0),[h,p]=e.useState({startDate:"",endDate:"",monthlyRent:"",requestMessage:""});e.useEffect((()=>{const e=window.location.pathname.split("/"),s=e[e.length-1],a=localStorage.getItem("user");a&&n(JSON.parse(a)),u(s)}),[]);const u=async e=>{try{const s=await fetch(`/api/properties/${e}`);if(s.ok){const e=await s.json();a(e),p((s=>({...s,monthlyRent:e.price})))}else E.error("Error al cargar la propiedad"),window.location.href="/properties"}catch(s){E.error("Error al cargar la propiedad"),window.location.href="/properties"}},y=e=>{p({...h,[e.target.name]:e.target.value})},g=()=>{if(!h.startDate||!h.endDate)return!0;const e=new Date(h.startDate),s=new Date(h.endDate),a=new Date;return a.setHours(0,0,0,0),e>=a&&s>e},j=()=>(new Date).toISOString().split("T")[0];return s&&l?l.username===s.ownerUsername?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsxs("div",{className:"text-center",children:[oe.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No puedes solicitar el alquiler de tu propia propiedad"}),oe.jsx("button",{onClick:()=>window.location.href="/properties",className:"btn-primary",children:"Buscar Otras Propiedades"})]})}):oe.jsx("div",{className:"min-h-screen pt-20 px-4",children:oe.jsxs("div",{className:"max-w-4xl mx-auto",children:[oe.jsxs(t.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-primary-600 transition-colors duration-300 mb-8",children:[oe.jsx(M,{className:"w-5 h-5 mr-2"}),"Volver"]}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(c,{className:"w-8 h-8 text-white"})}),oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Solicitar Alquiler"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Envía una solicitud al propietario para alquilar esta propiedad"})]}),oe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[oe.jsxs(t.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"card p-6",children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(r,{className:"w-6 h-6 mr-2"}),"Detalles de la Propiedad"]}),oe.jsxs("div",{className:"space-y-4",children:[oe.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",children:[s.images&&s.images.length>0?oe.jsxs("div",{className:"relative h-48 group",children:[oe.jsx("img",{src:s.images[m],alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),oe.jsx("div",{className:"h-48 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",style:{display:"none"},children:oe.jsx("span",{className:"text-white text-6xl font-bold",children:s.title.charAt(0)})}),s.images.length>1&&oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:()=>{s.images&&s.images.length>1&&x((e=>(e-1+s.images.length)%s.images.length))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(P,{className:"w-4 h-4"})}),oe.jsx("button",{onClick:()=>{s.images&&s.images.length>1&&x((e=>(e+1)%s.images.length))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:oe.jsx(I,{className:"w-4 h-4"})}),oe.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:s.images.map(((e,s)=>oe.jsx("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 "+(s===m?"bg-white":"bg-white/50")},s)))})]})]}):oe.jsx("div",{className:"h-48 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center",children:oe.jsx("span",{className:"text-white text-6xl font-bold",children:s.title.charAt(0)})}),oe.jsx("div",{className:"absolute top-3 right-3",children:s.available?oe.jsx("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Disponible"}):oe.jsxs("div",{className:"flex flex-col space-y-1",children:[oe.jsx("div",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Ocupado"}),s.occupiedUntil&&oe.jsxs("div",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:["Hasta: ",(b=s.occupiedUntil,b?new Date(b).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):null)]})]})})]}),oe.jsxs("div",{children:[oe.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:s.title}),oe.jsx("p",{className:"text-gray-600 mb-4",children:s.description})]}),oe.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[oe.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[oe.jsx("span",{className:"text-gray-600",children:"Dirección:"}),oe.jsx("p",{className:"font-medium text-gray-800",children:s.address})]}),oe.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[oe.jsx("span",{className:"text-gray-600",children:"Ciudad:"}),oe.jsx("p",{className:"font-medium text-gray-800",children:s.city})]}),oe.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[oe.jsx("span",{className:"text-gray-600",children:"Habitaciones:"}),oe.jsx("p",{className:"font-medium text-gray-800",children:s.bedrooms})]}),oe.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[oe.jsx("span",{className:"text-gray-600",children:"Baños:"}),oe.jsx("p",{className:"font-medium text-gray-800",children:s.bathrooms})]})]}),oe.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[oe.jsxs("div",{className:"flex items-center text-primary-600 mb-2",children:[oe.jsx(i,{className:"w-5 h-5 mr-2"}),oe.jsx("span",{className:"font-medium",children:"Propietario"})]}),oe.jsx("p",{className:"text-primary-800 font-semibold",children:s.ownerUsername})]}),oe.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[oe.jsxs("div",{className:"flex items-center text-green-600 mb-2",children:[oe.jsx(R,{className:"w-5 h-5 mr-2"}),oe.jsx("span",{className:"font-medium",children:"Precio sugerido"})]}),oe.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["€",s.price,"/mes"]})]})]})]}),oe.jsxs(t.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},className:"card p-6",children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(D,{className:"w-6 h-6 mr-2"}),"Solicitud de Alquiler"]}),oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Inicio Deseada"}),oe.jsx("input",{type:"date",id:"startDate",name:"startDate",value:h.startDate,onChange:y,min:j(),className:"input-field",required:!0})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Fin Deseada"}),oe.jsx("input",{type:"date",id:"endDate",name:"endDate",value:h.endDate,onChange:y,min:(()=>{if(!h.startDate)return j();const e=new Date(h.startDate);return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),className:"input-field",required:!0})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"monthlyRent",className:"block text-sm font-medium text-gray-700 mb-2",children:"Propuesta de Renta Mensual (€)"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"number",id:"monthlyRent",name:"monthlyRent",value:h.monthlyRent,onChange:y,className:"input-field pl-12",min:"0",step:"0.01",required:!0})]}),oe.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Precio sugerido: €",s.price]})]}),oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"requestMessage",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje para el Propietario"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(V,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),oe.jsx("textarea",{id:"requestMessage",name:"requestMessage",value:h.requestMessage,onChange:y,rows:4,className:"input-field pl-12 resize-none",placeholder:"Preséntate y explica por qué eres el inquilino ideal para esta propiedad...",required:!0})]})]}),h.startDate&&h.endDate&&h.monthlyRent&&oe.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[oe.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Resumen de la Solicitud"}),oe.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"Solicitante:"}),oe.jsx("span",{className:"font-medium",children:l.username})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"Duración:"}),oe.jsxs("span",{className:"font-medium",children:[Math.ceil((new Date(h.endDate)-new Date(h.startDate))/864e5)," días"]})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"Renta propuesta:"}),oe.jsxs("span",{className:"font-medium",children:["€",h.monthlyRent,"/mes"]})]}),oe.jsxs("div",{className:"flex justify-between",children:[oe.jsx("span",{children:"Estado:"}),oe.jsx("span",{className:"font-medium",children:s.available?"Solicitud inmediata":"Solicitud futura"})]})]})]}),!g()&&oe.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:oe.jsx("p",{className:"text-red-700 text-sm",children:"⚠️ Las fechas no son válidas. La fecha de inicio debe ser hoy o posterior, y la fecha de fin debe ser posterior a la de inicio."})}),oe.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[oe.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors duration-300",children:"Cancelar"}),oe.jsxs(t.button,{type:"submit",disabled:o||!g()||!h.requestMessage.trim(),onClick:async e=>{e.preventDefault(),d(!0);const a={propertyId:parseInt(s.id),tenantId:l.id,...h,monthlyRent:parseFloat(h.monthlyRent)};try{const e=await fetch("/api/rentals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(a)});if(e.ok)E.success("¡Solicitud de alquiler enviada exitosamente!"),window.location.href="/rentals";else{const s=await e.text();E.error(s||"Error al enviar la solicitud")}}catch(t){E.error("Error al enviar la solicitud")}finally{d(!1)}},whileHover:{scale:o?1:1.02},whileTap:{scale:o?1:.98},className:"btn-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[o?oe.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):oe.jsx(c,{className:"w-5 h-5 mr-2"}),o?"Enviando...":"Enviar Solicitud"]})]})]})]})]}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"mt-8 p-6 bg-yellow-50 border border-yellow-200 rounded-xl",children:[oe.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-3",children:"📋 Información sobre el Proceso"}),oe.jsxs("ul",{className:"text-yellow-700 space-y-2 text-sm",children:[oe.jsx("li",{children:"• Tu solicitud será enviada al propietario para su revisión"}),oe.jsx("li",{children:"• El propietario podrá aceptar, rechazar o negociar tu propuesta"}),oe.jsx("li",{children:"• Recibirás una notificación con la respuesta del propietario"}),oe.jsx("li",{children:"• Puedes hacer múltiples solicitudes para diferentes propiedades"}),oe.jsxs("li",{children:["• ",s.available?"Esta propiedad está disponible inmediatamente":"Esta propiedad está ocupada, tu solicitud será para cuando se libere"]})]})]})]})}):oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})});var b},ve=X.create({baseURL:"http://localhost:8080",headers:{"Content-Type":"application/json"}});ve.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e})),ve.interceptors.response.use((e=>e),(e=>{var s;return 401!==(null==(s=e.response)?void 0:s.status)||window.location.pathname.includes("/login")||window.location.pathname.includes("/register")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)}));const we=()=>{const[s,a]=e.useState("overview"),[l,n]=e.useState([]),[m,x]=e.useState([]),[h,p]=e.useState(null),[u,y]=e.useState(!1);e.useState(!1);const[g,j]=e.useState(!1);e.useState(null),e.useState(null);const[f,N]=e.useState({city:"",discount:""}),[v,w]=e.useState({name:"",description:""}),S=[{id:"overview",name:"Resumen",icon:W},{id:"users",name:"Usuarios",icon:b},{id:"categories",name:"Categorías",icon:Z},{id:"operations",name:"Operaciones",icon:d}];e.useEffect((()=>{C()}),[]);const C=async()=>{y(!0);try{await Promise.all([k(),P(),I()])}catch(e){E.error("Error al cargar datos")}finally{y(!1)}},k=async()=>{try{const e=await ve.get("/api/admin/users");n(e.data)}catch(e){console.error("Error fetching users:",e)}},P=async()=>{try{const e=await ve.get("/api/admin/categories");x(e.data)}catch(e){console.error("Error fetching categories:",e)}},I=async()=>{try{const e=await ve.get("/api/admin/reports/financial");p(e.data)}catch(e){console.error("Error fetching report:",e)}},D=async e=>{var s;e.preventDefault();try{await ve.post("/api/admin/categories",v),E.success("Categoría creada exitosamente"),w({name:"",description:""}),j(!1),P()}catch(a){E.error((null==(s=a.response)?void 0:s.data)||"Error al crear categoría")}},A=async e=>{e.preventDefault();try{await ve.post("/api/properties/apply-discount",null,{params:{city:f.city,discount:f.discount}}),E.success("Descuento aplicado exitosamente"),N({city:"",discount:""})}catch(s){E.error("Error al aplicar descuento")}},q=async()=>{try{await ve.post("/api/rentals/finalize-expired"),E.success("Alquileres vencidos finalizados exitosamente")}catch(e){E.error("Error al finalizar alquileres vencidos")}};return u?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):oe.jsx("div",{className:"min-h-screen pt-20 px-4",children:oe.jsxs("div",{className:"max-w-7xl mx-auto",children:[oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(d,{className:"w-8 h-8 text-white"})}),oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Panel de Administración"}),oe.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Gestiona usuarios, categorías y operaciones del sistema"})]}),oe.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"flex flex-wrap justify-center mb-8 border-b border-gray-200",children:S.map((e=>oe.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center px-6 py-3 mx-2 mb-2 rounded-t-lg transition-all duration-300 "+(s===e.id?"bg-primary-500 text-white border-b-2 border-primary-500":"text-gray-600 hover:text-primary-600 hover:bg-gray-50"),children:[oe.jsx(e.icon,{className:"w-5 h-5 mr-2"}),e.name]},e.id)))}),oe.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["overview"===s&&oe.jsxs("div",{className:"space-y-8",children:[oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[oe.jsxs(t.div,{whileHover:{y:-5},className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(b,{className:"w-8 h-8 text-blue-600"})}),oe.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:l.length}),oe.jsx("div",{className:"text-gray-600",children:"Total Usuarios"})]}),oe.jsxs(t.div,{whileHover:{y:-5},className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(r,{className:"w-8 h-8 text-green-600"})}),oe.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:(null==h?void 0:h.totalProperties)||0}),oe.jsx("div",{className:"text-gray-600",children:"Propiedades"})]}),oe.jsxs(t.div,{whileHover:{y:-5},className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(c,{className:"w-8 h-8 text-purple-600"})}),oe.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:(null==h?void 0:h.totalRentals)||0}),oe.jsx("div",{className:"text-gray-600",children:"Alquileres"})]}),oe.jsxs(t.div,{whileHover:{y:-5},className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:oe.jsx(R,{className:"w-8 h-8 text-yellow-600"})}),oe.jsxs("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:["€",(null==(O=null==h?void 0:h.totalRevenue)?void 0:O.toFixed(2))||"0.00"]}),oe.jsx("div",{className:"text-gray-600",children:"Ingresos Totales"})]})]}),h&&oe.jsxs("div",{className:"card p-8",children:[oe.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[oe.jsx(Q,{className:"w-6 h-6 mr-2"}),"Informe Financiero"]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[oe.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl",children:[oe.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Ingresos Totales"}),oe.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["€",null==(T=h.totalRevenue)?void 0:T.toFixed(2)]})]}),oe.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl",children:[oe.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Renta Promedio"}),oe.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["€",null==(F=h.averageRent)?void 0:F.toFixed(2)]})]}),oe.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-xl",children:[oe.jsx("h4",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Tasa de Ocupación"}),oe.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[h.totalRentals>0?(h.totalRentals/h.totalProperties*100).toFixed(1):"0","%"]})]})]})]})]}),"users"===s&&oe.jsxs("div",{className:"card p-6",children:[oe.jsx("div",{className:"flex items-center justify-between mb-6",children:oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 flex items-center",children:[oe.jsx(b,{className:"w-6 h-6 mr-2"}),"Gestión de Usuarios"]})}),oe.jsx("div",{className:"overflow-x-auto",children:oe.jsxs("table",{className:"w-full",children:[oe.jsx("thead",{children:oe.jsxs("tr",{className:"border-b border-gray-200",children:[oe.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Usuario"}),oe.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Email"}),oe.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Rol"}),oe.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Acciones"})]})}),oe.jsx("tbody",{children:l.map((e=>oe.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[oe.jsx("td",{className:"py-3 px-4",children:oe.jsxs("div",{className:"flex items-center",children:[oe.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:oe.jsx(i,{className:"w-5 h-5 text-primary-600"})}),oe.jsx("span",{className:"font-medium text-gray-800",children:e.username})]})}),oe.jsx("td",{className:"py-3 px-4 text-gray-600",children:e.email}),oe.jsx("td",{className:"py-3 px-4",children:oe.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("ADMIN"===e.role?"bg-red-100 text-red-800":"OWNER"===e.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.role})}),oe.jsx("td",{className:"py-3 px-4",children:oe.jsx("div",{className:"flex items-center space-x-2",children:oe.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{await ve.delete(`/api/admin/users/${e}`),E.success("Usuario eliminado exitosamente"),k()}catch(s){E.error("Error al eliminar usuario")}})(e.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors duration-300",children:oe.jsx($,{className:"w-4 h-4"})})})})]},e.id)))})]})})]}),"categories"===s&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{className:"card p-6",children:[oe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 flex items-center",children:[oe.jsx(Z,{className:"w-6 h-6 mr-2"}),"Gestión de Categorías"]}),oe.jsxs("button",{onClick:()=>j(!0),className:"btn-primary flex items-center",children:[oe.jsx(o,{className:"w-5 h-5 mr-2"}),"Nueva Categoría"]})]}),oe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((e=>oe.jsxs(t.div,{whileHover:{y:-2},className:"card p-4 border border-gray-200",children:[oe.jsxs("div",{className:"flex items-start justify-between mb-3",children:[oe.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:e.name}),oe.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta categoría?"))try{await ve.delete(`/api/admin/categories/${e}`),E.success("Categoría eliminada exitosamente"),P()}catch(s){E.error("Error al eliminar categoría")}})(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors duration-300",children:oe.jsx($,{className:"w-4 h-4"})})]}),oe.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]},e.id)))})]}),g&&oe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:oe.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[oe.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Nueva Categoría"}),oe.jsxs("form",{onSubmit:D,className:"space-y-4",children:[oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),oe.jsx("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),className:"input-field",required:!0})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),oe.jsx("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),className:"input-field resize-none",rows:3})]}),oe.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[oe.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-300",children:"Cancelar"}),oe.jsx("button",{type:"submit",className:"btn-primary",children:"Crear"})]})]})]})})]}),"operations"===s&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{className:"card p-6",children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(R,{className:"w-6 h-6 mr-2"}),"Aplicar Descuento por Ciudad"]}),oe.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),oe.jsx("input",{type:"text",value:f.city,onChange:e=>N({...f,city:e.target.value}),className:"input-field",placeholder:"Nombre de la ciudad",required:!0})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descuento (%)"}),oe.jsx("input",{type:"number",value:f.discount,onChange:e=>N({...f,discount:e.target.value}),className:"input-field",placeholder:"10",min:"0",max:"100",required:!0})]}),oe.jsx("div",{className:"flex items-end",children:oe.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Aplicar Descuento"})})]})]}),oe.jsxs("div",{className:"card p-6",children:[oe.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[oe.jsx(c,{className:"w-6 h-6 mr-2"}),"Operaciones de Alquileres"]}),oe.jsxs("button",{onClick:q,className:"btn-secondary flex items-center",children:[oe.jsx(H,{className:"w-5 h-5 mr-2"}),"Finalizar Alquileres Vencidos"]})]})]})]},s)]})});var O,T,F},Se=({username:s,isOwnProfile:a=!1})=>{const[l,n]=e.useState(null),[o,d]=e.useState(!0),[m,h]=e.useState(!1),[p,u]=e.useState({});e.useEffect((()=>{b()}),[s]);const b=async()=>{try{const e=a?"/api/users/profile":`/api/users/${s}`,t={"Content-Type":"application/json"};a&&(t.Authorization=`Bearer ${localStorage.getItem("token")}`);const r=await fetch(e,{headers:t});if(r.ok){const e=await r.json();n(e),u(e)}else E.error("Error al cargar el perfil del usuario")}catch(e){E.error("Error al cargar el perfil del usuario")}finally{d(!1)}},f=e=>{u({...p,[e.target.name]:e.target.value})};return o?oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):l?oe.jsx("div",{className:"min-h-screen pt-20 px-4",children:oe.jsxs("div",{className:"max-w-4xl mx-auto",children:[oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[oe.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4",children:oe.jsx(i,{className:"w-12 h-12 text-white"})}),oe.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:m?"Editar Perfil":"Perfil de Usuario"}),oe.jsx("p",{className:"text-xl text-gray-600",children:l.firstName&&l.lastName?`${l.firstName} ${l.lastName}`:l.username}),"ADMIN"===l.role&&oe.jsx("span",{className:"inline-block bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium mt-2",children:"Administrador"})]}),oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"card p-8 mb-8",children:[oe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[oe.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Información Personal"}),a&&oe.jsx("div",{className:"flex space-x-2",children:m?oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:()=>{h(!1),u({...l})},className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors duration-300",children:oe.jsx(x,{className:"w-5 h-5"})}),oe.jsx("button",{onClick:async()=>{try{const e=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(e.ok){const s=await e.json();n(s),u(s),h(!1),E.success("Perfil actualizado exitosamente")}else E.error("Error al actualizar el perfil")}catch(e){E.error("Error al actualizar el perfil")}},className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors duration-300",children:oe.jsx(Y,{className:"w-5 h-5"})})]}):oe.jsx("button",{onClick:()=>{h(!0),u({...l})},className:"p-2 bg-primary-100 text-primary-600 rounded-lg hover:bg-primary-200 transition-colors duration-300",children:oe.jsx(z,{className:"w-5 h-5"})})})]}),oe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Usuario"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",value:l.username,className:"input-field pl-12 bg-gray-50",disabled:!0})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"email",name:"email",value:m?p.email:l.email,onChange:f,className:"input-field pl-12 "+(m?"":"bg-gray-50"),disabled:!m})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),oe.jsx("input",{type:"text",name:"firstName",value:m?p.firstName||"":l.firstName||"",onChange:f,className:"input-field "+(m?"":"bg-gray-50"),placeholder:"Tu nombre",disabled:!m})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellidos"}),oe.jsx("input",{type:"text",name:"lastName",value:m?p.lastName||"":l.lastName||"",onChange:f,className:"input-field "+(m?"":"bg-gray-50"),placeholder:"Tus apellidos",disabled:!m})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"tel",name:"phone",value:m?p.phone||"":l.phone||"",onChange:f,className:"input-field pl-12 "+(m?"":"bg-gray-50"),placeholder:"Tu número de teléfono",disabled:!m})]})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Registro"}),oe.jsxs("div",{className:"relative",children:[oe.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),oe.jsx("input",{type:"text",value:new Date(l.createdAt||Date.now()).toLocaleDateString("es-ES"),className:"input-field pl-12 bg-gray-50",disabled:!0})]})]}),oe.jsxs("div",{className:"md:col-span-2",children:[oe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biografía"}),oe.jsx("textarea",{name:"bio",value:m?p.bio||"":l.bio||"",onChange:f,rows:3,className:"input-field resize-none "+(m?"":"bg-gray-50"),placeholder:"Cuéntanos algo sobre ti...",disabled:!m})]})]})]}),!a&&oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"card p-6 mb-8",children:[oe.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Información de Contacto"}),oe.jsxs("div",{className:"space-y-3",children:[l.email&&oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx(y,{className:"w-5 h-5 text-primary-500"}),oe.jsx("span",{className:"text-gray-700",children:l.email})]}),l.phone&&oe.jsxs("div",{className:"flex items-center space-x-3",children:[oe.jsx(g,{className:"w-5 h-5 text-primary-500"}),oe.jsx("span",{className:"text-gray-700",children:l.phone})]}),!l.email&&!l.phone&&oe.jsx("p",{className:"text-gray-500 text-sm",children:"Este usuario no ha compartido información de contacto pública."})]})]}),a&&oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[oe.jsxs("div",{className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:oe.jsx(r,{className:"w-6 h-6 text-blue-600"})}),oe.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:"0"}),oe.jsx("div",{className:"text-sm text-gray-600",children:"Propiedades Publicadas"})]}),oe.jsxs("div",{className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:oe.jsx(c,{className:"w-6 h-6 text-green-600"})}),oe.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:"0"}),oe.jsx("div",{className:"text-sm text-gray-600",children:"Alquileres Activos"})]}),oe.jsxs("div",{className:"card p-6 text-center",children:[oe.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:oe.jsx(j,{className:"w-6 h-6 text-purple-600"})}),oe.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:"0"}),oe.jsx("div",{className:"text-sm text-gray-600",children:"Solicitudes Pendientes"})]})]}),l.bio&&!m&&oe.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"card p-6",children:[oe.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Acerca de ",l.firstName||l.username]}),oe.jsx("p",{className:"text-gray-700 leading-relaxed",children:l.bio})]})]})}):oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsxs("div",{className:"text-center",children:[oe.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Usuario no encontrado"}),oe.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Volver"})]})})};function Ce(){const[s,a]=e.useState("home"),[t,r]=e.useState(!1),[i,l]=e.useState(null),[n,c]=e.useState(!0);e.useEffect((()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{const e=JSON.parse(s);l(e),r(!0)}catch(i){localStorage.removeItem("token"),localStorage.removeItem("user")}const t=window.location.pathname;console.log("Current path:",t),"/login"===t?a("login"):"/register"===t?a("register"):"/properties"===t?a("properties"):t.startsWith("/properties/")?a("property-detail"):"/create-property"===t?a("create-property"):"/rentals"===t?a("rentals"):t.startsWith("/create-rental/")?a("create-rental"):a("/admin"===t?"admin":"/profile"===t?"profile":"home"),c(!1)}),[]),e.useEffect((()=>{const e=()=>{const e=window.location.pathname;"/login"===e?a("login"):"/register"===e?a("register"):"/properties"===e?a("properties"):e.startsWith("/properties/")?a("property-detail"):"/create-property"===e?a("create-property"):"/rentals"===e?a("rentals"):e.startsWith("/create-rental/")?a("create-rental"):a("/admin"===e?"admin":"/profile"===e?"profile":"home")};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]);return oe.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[oe.jsx(xe,{}),oe.jsx("div",{className:"min-h-screen",children:(()=>{if(n)return oe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:oe.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})});switch(s){case"login":return oe.jsx(pe,{});case"register":return oe.jsx(ue,{});case"properties":return oe.jsx(ge,{});case"property-detail":return oe.jsx(je,{});case"create-property":return t?oe.jsx(be,{}):oe.jsx(pe,{});case"rentals":return t?oe.jsx(fe,{}):oe.jsx(pe,{});case"create-rental":return t?oe.jsx(Ne,{}):oe.jsx(pe,{});case"admin":return t&&"ADMIN"===(null==i?void 0:i.role)?oe.jsx(we,{}):oe.jsx(he,{});case"profile":return t?oe.jsx(Se,{username:null==i?void 0:i.username,isOwnProfile:!0}):oe.jsx(pe,{});default:return oe.jsx(he,{})}})()}),oe.jsx(K,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#ffffff",color:"#374151",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",borderRadius:"16px"}}})]})}const ke=e.createContext(),Ee=({children:s})=>{const[a,t]=e.useState(null),[r,i]=e.useState(!0);e.useEffect((()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{const e=JSON.parse(s);t(e)}catch(a){localStorage.removeItem("token"),localStorage.removeItem("user")}i(!1)}),[]);const l={user:a,login:async e=>{try{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){const e=await s.json();return localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t(e.user),{success:!0}}return{success:!1,message:await s.text()||"Error en el login"}}catch(s){return{success:!1,message:"Error en el login"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(null),window.location.href="/"},loading:r,isAuthenticated:!!a,isAdmin:"ADMIN"===(null==a?void 0:a.role)};return oe.jsx(ke.Provider,{value:l,children:s})};de.createRoot(document.getElementById("root")).render(oe.jsx(a.StrictMode,{children:oe.jsx(Ee,{children:oe.jsx(Ce,{})})}));
